(this.webpackJsonpreportes=this.webpackJsonpreportes||[]).push([[0],{17:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(2),o=n.n(r),a=n(9),s=n.n(a),i=n(1),u=n(4),l=n(3),d=n.n(l),p=n(10),b=n(7),j="https://cemasapi.herokuapp.com",m=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,c,r,o,a,s,i,u,l,b,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,c=t.params,r=t.id,j,o="",1===c.length){a=Object(p.a)(c);try{for(a.s();!(s=a.n()).done;)i=s.value,o+="/".concat(i.key,"/").concat(i.value)}catch(d){a.e(d)}finally{a.f()}}else r&&(o+="/".concat(r));return u="".concat("https://cemasapi.herokuapp.com").concat(n).concat(encodeURI(o)),e.next=7,fetch(u);case 7:return l=e.sent,e.next=10,l.json();case 10:return b=e.sent,m=b.data,e.abrupt("return",m);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(b.a)(d.a.mark((function e(t,n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j,c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch("".concat("https://cemasapi.herokuapp.com").concat(t),c);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({url:"/curso",params:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=n(5);var O=function(e){var t,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),n=Object(u.a)(t,2),c=n[0],o=n[1];return[c,function(e){var t=e.target;o(Object(i.a)(Object(i.a)({},c),{},Object(v.a)({},t.name,t.value)))},function(){o(arguments.length>0&&void 0!==arguments[0]?arguments[0]:e)}]}({periodo:""}),o=Object(u.a)(n,2),a=o[0],s=o[1],l=a.periodo,d=Object(r.useState)({cursos:[]}),p=Object(u.a)(d,2),b=p[0],m=p[1],O=function(){f([{key:"codigo_periodo",value:l}]).then((function(e){return m((function(t){return console.log(t.periodo,e),Object(i.a)(Object(i.a)({},t),{},{message:"".concat(null===e||void 0===e?void 0:e.length," Curso").concat((null===e||void 0===e?void 0:e.length)<2?"":"s"," obtenido").concat((null===e||void 0===e?void 0:e.length)<2?"":"s"," de  BD."),cursos:e})}))})).catch((function(e){return m((function(e){return Object(i.a)(Object(i.a)({},e),{},{cursos:[],message:"Revisar el internet!"})}))}))};Object(r.useEffect)((function(){console.log("Cargar todos los cursos creados por el usuario"),O()}),[]);var g=null===(t=b.cursos)||void 0===t?void 0:t.map((function(e){var t={_id:e._id,curso:e.codigo_curso,titular:e.codigo_titular,periodo:e.codigo_periodo,centro:e.codigo_centro};return Object(c.jsx)("div",{className:"card border-dark mb-3 mt-3 ml-3 mr-3",style:{width:"18rem"},children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h5",{className:"card-title",children:"Reporte"}),Object(c.jsxs)("h6",{className:"card-subtitle mb-2 text-muted",children:[" ","".concat(e.codigo_curso)]}),Object(c.jsxs)("p",{className:"card-text",children:[" Periodo Educativo: ",e.codigo_periodo]}),Object(c.jsx)("button",{onClick:function(){return e=t,console.log("UPDATE REPORTES"),void h("/reportes/create",e).then((function(e){return e.json()})).then((function(t){console.log("Reportes",t),t.create?(m(Object(i.a)(Object(i.a)({},b),{},{message:"Los reportes de ".concat(e.curso," fueron actualizados!")})),window.alert("Actualizacion completada!")):m(Object(i.a)(Object(i.a)({},b),{},{message:"No existen boletines para ".concat(e.curso,"!")}))}));var e},className:"btn btn-outline-danger mr-1",children:"Actualizar"}),Object(c.jsx)("button",{onClick:function(){return function(e){var t="".concat(j,"/reporte/pdf","/").concat(e._id);console.log("GET PDF",t),window.open(t)}(t)},className:"btn btn-outline-success ml-1",children:"PDF"})]})},e._id)}));return Object(c.jsx)("div",{className:"container mt-3 mb-5",children:Object(c.jsxs)("div",{classNamme:"col",children:[Object(c.jsxs)("div",{className:"row mt-3 form-group",children:[Object(c.jsx)("h1",{children:"Reportes: "}),Object(c.jsxs)("div",{className:"input-group mt-3 mb-3",children:[Object(c.jsx)("input",{type:"text",className:"form-control",name:"periodo",placeholder:"Buscar por peridodo, ejem: 2020-2021",value:l,onChange:s}),Object(c.jsx)("div",{className:"input-group-append",children:Object(c.jsx)("button",{className:"btn btn-outline-primary",type:"button",onClick:O,children:"Buscar"})})]})]}),Object(c.jsx)("div",{className:"row justify-content-center",children:g})]})})};var g=function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(O,{})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))};s.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root")),x()}},[[17,1,2]]]);
//# sourceMappingURL=main.644b58cc.chunk.js.map