(this.webpackJsonpreportes=this.webpackJsonpreportes||[]).push([[0],{18:function(e,t,r){"use strict";r.r(t);var c=r(0),n=r(3),a=r.n(n),o=r(10),s=r.n(o),i=r(2),u=r.n(i),l=r(4),d=r(1),p=r(5),b=r(11),j="https://cemasapi.herokuapp.com",m=function(){var e=Object(l.a)(u.a.mark((function e(t){var r,c,n,a,o,s,i,l,d,p,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.url,c=t.params,n=t.id,j,a="",1===c.length){o=Object(b.a)(c);try{for(o.s();!(s=o.n()).done;)i=s.value,a+="/".concat(i.key,"/").concat(i.value)}catch(u){o.e(u)}finally{o.f()}}else n&&(a+="/".concat(n));return l="".concat("https://cemasapi.herokuapp.com").concat(r).concat(encodeURI(a)),e.next=7,fetch(l);case 7:return d=e.sent,e.next=10,d.json();case 10:return p=e.sent,m=p.data,e.abrupt("return",m);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(u.a.mark((function e(t,r){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j,c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},e.next=4,fetch("".concat("https://cemasapi.herokuapp.com").concat(t),c);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),f=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({url:"/curso",params:t});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=r(7),O=r(6),g=r.n(O);var x=function(e){var t,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),r=Object(p.a)(t,2),c=r[0],a=r[1];return[c,function(e){var t=e.target;a(Object(d.a)(Object(d.a)({},c),{},Object(v.a)({},t.name,t.value)))},function(){a(arguments.length>0&&void 0!==arguments[0]?arguments[0]:e)}]}({periodo:""}),a=Object(p.a)(r,2),o=a[0],s=a[1],i=o.periodo,b=Object(n.useState)({cursos:[],reporte:!1}),m=Object(p.a)(b,2),O=m[0],x=m[1],k=function(){f([{key:"codigo_periodo",value:i}]).then((function(e){return x((function(t){return console.log(t.periodo,e),(null===e||void 0===e?void 0:e.length)&&g.a.fire("Reportes ".concat(i," Cargados! "),"Click para cerrar!","success"),Object(d.a)(Object(d.a)({},t),{},{message:"".concat(null===e||void 0===e?void 0:e.length," Curso").concat((null===e||void 0===e?void 0:e.length)<2?"":"s"," obtenido").concat((null===e||void 0===e?void 0:e.length)<2?"":"s"," de  BD."),cursos:e})}))})).catch((function(e){return x((function(e){return g.a.fire("Reportes ".concat(i," error cargando! "),"Click para cerrar!","error"),Object(d.a)(Object(d.a)({},e),{},{cursos:[],message:"Revisar el internet!"})}))}))};Object(n.useEffect)((function(){console.log("Cargar todos los cursos creados por el usuario"),k()}),[]);var N=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="".concat(j,"/reporte/pdf","/").concat(t._id);try{window.open(r,"_blank"),x(Object(d.a)(Object(d.a)({},O),{},{reporte:r}))}catch(c){console.log("GET PDF Error")}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=null===(t=O.cursos)||void 0===t?void 0:t.map((function(e){var t={_id:e._id,curso:e.codigo_curso,titular:e.codigo_titular,periodo:e.codigo_periodo,centro:e.codigo_centro};return Object(c.jsx)("div",{className:"card border-dark mb-3 mt-3 ml-3 mr-3",style:{width:"18rem"},children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h5",{className:"card-title",children:"Reporte"}),Object(c.jsxs)("h6",{className:"card-subtitle mb-2 text-muted",children:[" ","".concat(e.codigo_curso)]}),Object(c.jsxs)("p",{className:"card-text",children:[" Periodo Educativo: ",e.codigo_periodo]}),Object(c.jsxs)("p",{className:"card-text",children:[" Titular: ",e.nombre_titular]}),Object(c.jsx)("button",{onClick:function(){var e;h("/reportes/create",e=t).then((function(e){return e.json()})).then((function(t){console.log("Reportes",t),t.create?(x(Object(d.a)(Object(d.a)({},O),{},{message:"Los reportes de ".concat(e.curso," fueron actualizados!")})),g.a.fire("Reporte actualizado!","Click para cerrar!","success")):(x(Object(d.a)(Object(d.a)({},O),{},{message:"No existen boletines para ".concat(e.curso,"!")})),g.a.fire("Error vuelve a intentarlo!","Click para cerrar!","error"))}))},className:"btn btn-outline-danger mr-1",children:"Actualizar"}),Object(c.jsx)("button",{onClick:function(){return N(t)},className:"btn btn-outline-success ml-1",children:"PDF"})]})},e._id)}));return Object(c.jsx)("div",{className:"container mt-3 mb-5",children:Object(c.jsxs)("div",{classNamme:"col",children:[Object(c.jsxs)("div",{className:"row mt-5 form-group",children:[Object(c.jsx)("h1",{className:"ml-2",children:"Reportes: "}),Object(c.jsxs)("div",{className:"input-group mt-3 mb-3",children:[Object(c.jsx)("input",{type:"text",className:"form-control ml-2 ",name:"periodo",placeholder:"Buscar por peridodo, ejem: 2020-2021",value:i,onChange:s}),Object(c.jsx)("div",{className:"input-group-append",children:Object(c.jsx)("button",{className:"btn btn-outline-primary",type:"button",onClick:k,children:"Buscar"})})]})]}),Object(c.jsx)("div",{className:"row justify-content-center",children:y})]})})};var k=function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(x,{})})},N=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,19)).then((function(t){var r=t.getCLS,c=t.getFID,n=t.getFCP,a=t.getLCP,o=t.getTTFB;r(e),c(e),n(e),a(e),o(e)}))};s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(k,{})}),document.getElementById("root")),N()}},[[18,1,2]]]);
//# sourceMappingURL=main.d0773218.chunk.js.map